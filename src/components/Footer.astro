---
import type {HTMLAttributes} from 'astro/types';

/**
 * Footer component with social links and copyright notice
 * Provides persistent access to contact links at page bottom
 *
 * @example
 * ```astro
 * <Footer />
 * ```
 *
 * @example
 * ```astro
 * <Footer class="mt-auto" />
 * ```
 */
interface Props extends HTMLAttributes<'footer'> {}

const {class: className, ...attrs} = Astro.props;

const socialLinks = [
  {
    label: 'GitHub',
    href: 'https://github.com/cbenge509',
    ariaLabel: 'GitHub profile (opens in new tab)',
    isExternal: true,
  },
  {
    label: 'LinkedIn',
    href: 'https://www.linkedin.com/in/crisbenge/',
    ariaLabel: 'LinkedIn profile (opens in new tab)',
    isExternal: true,
  },
];

const currentYear = new Date().getFullYear();
---

<footer
  data-component="footer"
  class:list={[
    'bg-surface dark:bg-surface-dark',
    'border-t border-border dark:border-border-dark',
    className,
  ]}
  {...attrs}
>
  <div class="container-custom py-8 md:py-12">
    <div
      class="flex flex-col md:flex-row items-center justify-between gap-4 md:gap-8"
    >
      <!-- Social Links -->
      <nav aria-label="Social links" class="flex items-center gap-4">
        {
          socialLinks.map((link) => (
            <a
              href={link.href}
              target={link.isExternal ? '_blank' : undefined}
              rel={link.isExternal ? 'noopener noreferrer' : undefined}
              class="footer-link relative min-h-11 min-w-11 px-3 py-3 text-body text-text dark:text-text-dark hover:text-accent dark:hover:text-accent-dark transition-colors duration-150 focus-ring rounded flex items-center justify-center gap-1"
              aria-label={link.ariaLabel}
              data-testid={`footer-${link.label.toLowerCase()}-link`}
            >
              {link.label}
              {link.isExternal && (
                <span aria-hidden="true" class="text-xs">
                  â†—
                </span>
              )}
            </a>
          ))
        }
      </nav>

      <!-- Copyright -->
      <p class="text-caption">
        &copy; {currentYear} Cris Benge
      </p>
    </div>
  </div>
</footer>

<style>
  /* Gradient underline hover effect for footer links */
  .footer-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(
      90deg,
      var(--color-accent),
      var(--color-accent-hover, var(--color-accent))
    );
    transition: width 150ms ease-out;
  }

  .footer-link:hover::after,
  .footer-link:focus-visible::after {
    width: 100%;
  }

  /* Dark mode gradient */
  :global(.dark) .footer-link::after {
    background: linear-gradient(
      90deg,
      var(--color-accent-dark),
      var(--color-accent-hover-dark, var(--color-accent-dark))
    );
  }

  /* Reduced motion: use opacity instead of width animation */
  @media (prefers-reduced-motion: reduce) {
    .footer-link::after {
      transition: opacity 150ms ease-out;
      width: 100%;
      opacity: 0;
    }

    .footer-link:hover::after,
    .footer-link:focus-visible::after {
      opacity: 1;
    }
  }
</style>
