---
import type {HTMLAttributes} from 'astro/types';

/**
 * Hero section component displaying professional identity
 * Features signature animation sequence on page load (UX-10 NON-NEGOTIABLE)
 *
 * @slot default - Not used (content is hardcoded for portfolio consistency)
 * @example
 * ```astro
 * <Hero />
 * ```
 * @example
 * ```astro
 * <Hero class="mt-20" />
 * ```
 */
interface Props extends HTMLAttributes<'section'> {
  /** Optional class name for additional styling */
  class?: string;
}

const {class: className, ...attrs} = Astro.props;

// Profile data - could be externalized to content collection later
const profile = {
  name: 'Cris Benge',
  role: 'Head of Federal Innovation, Google',
  credentials: [
    {label: 'Columbia MS', type: 'education' as const},
    {label: 'Berkeley MIDS', type: 'education' as const},
    {label: 'TS/SCI', type: 'clearance' as const},
  ],
  links: {
    linkedin: 'https://linkedin.com/in/cbenge509',
    github: 'https://github.com/cbenge509',
  },
};
---

<section
  aria-labelledby="hero-heading"
  class:list={[
    'py-16 md:py-20 lg:py-24',
    'px-6 md:px-8',
    'bg-bg dark:bg-bg-dark',
    className,
  ]}
  {...attrs}
>
  <div class="max-w-4xl">
    <!-- Name - h1 with signature animation -->
    <h1
      id="hero-heading"
      class="text-display-lg text-text dark:text-text-dark hero-animate-name"
      data-testid="hero-name"
    >
      {profile.name}
    </h1>

    <!-- Role - subtitle with staggered animation -->
    <p
      class="mt-2 font-display text-xl md:text-2xl font-semibold text-text-secondary dark:text-text-secondary-dark hero-animate-role"
      data-testid="hero-role"
    >
      {profile.role}
    </p>

    <!-- Credential badges -->
    <div
      class="mt-6 flex flex-wrap gap-3"
      data-testid="hero-credentials"
    >
      {
        profile.credentials.map((cred, index) => (
          <span
            class:list={[
              'inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium hero-animate-credential',
              cred.type === 'education'
                ? 'bg-surface text-text dark:bg-surface-dark dark:text-text-dark'
                : 'bg-accent/5 text-accent-hover dark:bg-accent-dark/15 dark:text-accent-dark',
            ]}
            style={`animation-delay: ${400 + index * 150}ms`}
            data-testid={`hero-credential-${index}`}
          >
            {cred.label}
          </span>
        ))
      }
    </div>

    <!-- CTA buttons -->
    <div
      class="mt-8 flex flex-col md:flex-row gap-4 hero-animate-ctas"
      data-testid="hero-ctas"
    >
      <!-- Primary CTA - LinkedIn -->
      <a
        href={profile.links.linkedin}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-accent text-white rounded-lg hover:bg-accent-hover dark:bg-accent dark:hover:bg-accent-hover transition-colors duration-150 focus-ring w-full md:w-auto min-h-[44px]"
        data-testid="hero-linkedin"
      >
        LinkedIn
        <span aria-hidden="true">&#x2197;</span>
        <span class="sr-only">(opens in new tab)</span>
      </a>

      <!-- Secondary CTA - GitHub -->
      <a
        href={profile.links.github}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-accent text-accent rounded-lg hover:bg-accent hover:text-white dark:border-accent-dark dark:text-accent-dark dark:hover:bg-accent-dark dark:hover:text-white transition-colors duration-150 focus-ring w-full md:w-auto min-h-[44px]"
        data-testid="hero-github"
      >
        GitHub
        <span aria-hidden="true">&#x2197;</span>
        <span class="sr-only">(opens in new tab)</span>
      </a>
    </div>
  </div>
</section>

<style>
  /* =============================================================================
     HERO SIGNATURE ANIMATION - UX-10 (NON-NEGOTIABLE)
     ==============================================================================
     GPU-accelerated animations using transform + opacity only.
     Animation sequence:
     - Name: 0-400ms (fade in + slide up)
     - Role: 200-500ms (overlaps with name for smooth flow)
     - Credentials: 400-800ms (staggered)
     - CTAs: 600-1000ms
     Total: ~1.2 seconds
     ============================================================================= */

  @keyframes hero-fade-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Name - first to animate */
  .hero-animate-name {
    animation: hero-fade-up 400ms var(--ease-out) forwards;
  }

  /* Role - overlaps with name slightly */
  .hero-animate-role {
    opacity: 0;
    animation: hero-fade-up 300ms var(--ease-out) 200ms forwards;
  }

  /* Credentials - staggered animation (400-700ms based on index) */
  .hero-animate-credential {
    opacity: 0;
    animation: hero-fade-up 300ms var(--ease-out) forwards;
    /* animation-delay is set inline per badge: 400ms, 550ms, 700ms */
  }

  /* CTAs - final element */
  .hero-animate-ctas {
    opacity: 0;
    animation: hero-fade-up 400ms var(--ease-out) 600ms forwards;
  }

  /* =============================================================================
     REDUCED MOTION SUPPORT - AC3
     ==============================================================================
     When user prefers reduced motion:
     - All content appears immediately (no transform animations)
     - Opacity transitions ARE allowed (not jarring per UX spec)
     - Uses 150ms opacity for subtle fade
     ============================================================================= */

  @media (prefers-reduced-motion: reduce) {
    .hero-animate-name,
    .hero-animate-role,
    .hero-animate-credential,
    .hero-animate-ctas {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }
</style>
