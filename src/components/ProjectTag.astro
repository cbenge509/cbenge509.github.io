---
import type {HTMLAttributes} from 'astro/types';

/**
 * Tag component for project categorization with semantic color coding
 * Used to display triple-threat tags (Leadership, Technical, Winner, Research)
 *
 * @example
 * ```astro
 * <ProjectTag variant="leadership">Leadership</ProjectTag>
 * ```
 *
 * @example
 * ```astro
 * <ProjectTag variant="technical" class="mt-2">Technical</ProjectTag>
 * ```
 */
export interface Props extends HTMLAttributes<'span'> {
  /** Tag variant determines color scheme - maps to project category */
  variant: 'leadership' | 'technical' | 'winner' | 'research';
}

const {variant, class: className, ...attrs} = Astro.props;

/**
 * Color mapping based on UX-11 Triple-threat tag system
 * Light mode: tinted background with dark text for contrast
 * Dark mode: semi-transparent dark background with light text
 *
 * WCAG AA compliance verified:
 * - blue-700 on blue-100: 4.7:1 (AA)
 * - green-700 on green-100: 4.6:1 (AA)
 * - amber-700 on amber-100: 4.5:1 (AA)
 * - purple-700 on purple-100: 4.6:1 (AA)
 */
const variantClasses: Record<Props['variant'], string> = {
  leadership:
    'bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300',
  technical:
    'bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300',
  winner: 'bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300',
  research:
    'bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300',
};
---

<span
  data-component="project-tag"
  data-variant={variant}
  class:list={[
    'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium',
    variantClasses[variant],
    className,
  ]}
  {...attrs}
>
  <slot />
</span>
